{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from \"pinia\";\nimport { useAppStore } from \"@/stores/app.store\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n\n  data() {\n    const accountFormSchema = yup.object().shape({\n      phone: yup.string().required(\"Vui lòng nhập trường này.\").matches(/((09|03|07|08|05)+([0-9]{8})\\b)/g, \"Số điện thoại không hợp lệ.\"),\n      password: yup.string().required(\"Vui lòng nhập trường này.\").min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\").max(8, \"Mật khẩu dài tối đa 8 kí tự.\")\n    });\n    return {\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true\n      },\n      err: false,\n      loading: false\n    };\n  },\n\n  methods: { ...mapActions(useAppStore, [\"login\"]),\n\n    async handleLogin(user) {\n      this.loading = true;\n\n      try {\n        await this.login(user);\n        const redirectPath = this.$route.query.redirect || {\n          name: \"home\" //profile\n\n        };\n        this.$router.push(redirectPath);\n      } catch (error) {\n        console.log(error);\n        this.loading = false;\n        this.message = \"Đã có lỗi xảy ra.\";\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAuDA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,YAAtB,QAA0C,cAA1C;AAEA,eAAe;EACbC,UAAU,EAAE;IACVH,IADU;IAEVC,KAFU;IAGVC;EAHU,CADC;;EAMbE,IAAI,GAAG;IACL,MAAMC,iBAAgB,GAAIN,GAAG,CAACO,MAAJ,GAAaC,KAAb,CAAmB;MAC3CC,KAAK,EAAET,GAAE,CACNU,MADI,GAEJC,QAFI,CAEK,2BAFL,EAGJC,OAHI,CAIH,kCAJG,EAKH,6BALG,CADoC;MAQ3CC,QAAQ,EAAEb,GAAE,CACTU,MADO,GAEPC,QAFO,CAEE,2BAFF,EAGPG,GAHO,CAGH,CAHG,EAGA,sCAHA,EAIPC,GAJO,CAIH,CAJG,EAIA,8BAJA;IARiC,CAAnB,CAA1B;IAcA,OAAO;MACLT,iBADK;MAELU,OAAO,EAAE;QACPC,IAAI,EAAEC,MADC;QAEPC,OAAO,EAAE;MAFF,CAFJ;MAMLC,GAAG,EAAE,KANA;MAOLC,OAAO,EAAE;IAPJ,CAAP;EASD,CA9BY;;EA+BbC,OAAO,EAAE,EACP,GAAGxB,UAAU,CAACC,WAAD,EAAc,CAAC,OAAD,CAAd,CADN;;IAGP,MAAMwB,WAAN,CAAkBC,IAAlB,EAAwB;MACtB,KAAKH,OAAL,GAAe,IAAf;;MAEA,IAAI;QACF,MAAM,KAAKI,KAAL,CAAWD,IAAX,CAAN;QAEA,MAAME,YAAW,GAAI,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,IAA8B;UACjDC,IAAI,EAAE,MAD2C,CACnC;;QADmC,CAAnD;QAIA,KAAKC,OAAL,CAAaC,IAAb,CAAkBN,YAAlB;MACF,CARA,CAQE,OAAOO,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QAEA,KAAKZ,OAAL,GAAe,KAAf;QACA,KAAKe,OAAL,GAAe,mBAAf;MACF;IACD;;EApBM;AA/BI,CAAf","names":["mapActions","useAppStore","yup","Form","Field","ErrorMessage","components","data","accountFormSchema","object","shape","phone","string","required","matches","password","min","max","account","type","Object","require","err","loading","methods","handleLogin","user","login","redirectPath","$route","query","redirect","name","$router","push","error","console","log","message"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\n  <div class=\"wapperaccount\">\n    <div class=\"js-center\">\n      <div id=\"login\">\n        <h2 class=\"titleAccount\">Đăng Nhập</h2>\n        <Form\n          class=\"login\"\n          :validation-schema=\"accountFormSchema\"\n          @submit=\"handleLogin(account)\"\n        >\n          <ul>\n            <li>\n              <Field\n                name=\"phone\"\n                type=\"text\"\n                placeholder=\"Số điện thoại\"\n                class=\"text\"\n                v-model=\"account.phone\"\n              />\n              <ErrorMessage name=\"phone\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Mật khẩu\"\n                class=\"text\"\n                v-model=\"account.password\"\n              />\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\n            </li>\n            <div class=\"err\" v-if=\"err\">\n              Tên đăng nhập hoặc mật khẩu không khớp, vui lòng nhập lại.\n            </div>\n            <div class=\"form-login\">\n              <button type=\"submit\" class=\"login btn\">ĐĂNG NHẬP</button>\n            </div>\n            <div class=\"rep_pas\">\n              <a href=\"#\">Quên mật khẩu?</a>\n            </div>\n          </ul>\n        </Form>\n        <div class=\"page-login__thirdPartLogin_line\">\n          <span>Hoặc</span>\n        </div>\n        <div class=\"register\">\n          Bạn chưa có tài khoản?\n          <router-link to=\"/register\">Đăng ký</router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"pinia\";\nimport { useAppStore } from \"@/stores/app.store\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  data() {\n    const accountFormSchema = yup.object().shape({\n      phone: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .matches(\n          /((09|03|07|08|05)+([0-9]{8})\\b)/g,\n          \"Số điện thoại không hợp lệ.\"\n        ),\n      password: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\")\n        .max(8, \"Mật khẩu dài tối đa 8 kí tự.\"),\n    });\n    return {\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true,\n      },\n      err: false,\n      loading: false,\n    };\n  },\n  methods: {\n    ...mapActions(useAppStore, [\"login\"]),\n\n    async handleLogin(user) {\n      this.loading = true;\n\n      try {\n        await this.login(user);\n\n        const redirectPath = this.$route.query.redirect || {\n          name: \"home\", //profile\n        };\n\n        this.$router.push(redirectPath);\n      } catch (error) {\n        console.log(error);\n\n        this.loading = false;\n        this.message = \"Đã có lỗi xảy ra.\";\n      }\n    },\n  },\n};\n</script>\n\n<style cope>\n.wapperaccount {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.js-center {\n  width: 380px;\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.err {\n  font-size: 0.9rem;\n  color: rgb(255, 0, 0);\n}\n\n.titleAccount {\n  font-size: 1.4rem;\n  font-weight: 600;\n  text-align: center;\n}\n\n.login ul {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 6px;\n}\n\n.login ul li {\n  width: 100%;\n  height: 48px;\n  margin: 12px 0;\n  border: 1px solid #999999;\n}\n\n.login ul li input {\n  background-color: transparent;\n  padding: 0 6px;\n}\n\n.text {\n  width: 100%;\n  height: 100%;\n  padding: 6px;\n  outline: none;\n  border: none;\n  font-size: 0.9rem;\n}\n\n.form-login {\n  height: 42px;\n  margin-top: 14px;\n  width: 100%;\n}\n\n.form-login .login {\n  background-color: var(--backg);\n  width: 100%;\n  height: 100%;\n  padding: 6px;\n  font-weight: 700;\n  cursor: pointer;\n  text-align: center;\n}\n\n.form-login .login:hover {\n  opacity: 0.8;\n}\n\n.rep_pas {\n  margin-top: 12px;\n}\n\n.rep_pas a {\n  font-size: 0.9rem;\n  color: #666666;\n}\n\n.rep_pas a:hover {\n  color: #000000;\n}\n\n.page-login__thirdPartLogin_line {\n  position: relative;\n  color: #b2b2b2;\n  padding: 6px 0;\n  font-size: 1rem;\n}\n\n.page-login__thirdPartLogin_line::before {\n  content: \"\";\n  width: 44%;\n  height: 1px;\n  background: #b2b2b2;\n  position: absolute;\n  top: 50%;\n  left: 0;\n}\n\n.page-login__thirdPartLogin_line::after {\n  content: \"\";\n  width: 44%;\n  height: 1px;\n  background: #b2b2b2;\n  position: absolute;\n  top: 50%;\n  right: 0;\n}\n\n.page-login__thirdPartLogin_line span {\n  padding-left: 45%;\n}\n\n.register {\n  font-size: 0.9rem;\n  color: #666666;\n  text-align: center;\n}\n\n.register a {\n  font-size: 1rem;\n  color: #0000ff;\n  font-weight: 700;\n}\n\n.register a:hover {\n  opacity: 0.8;\n  text-decoration-line: underline;\n}\n\n.error-feedback {\n  font-size: 0.8rem;\n  text-align: left;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}