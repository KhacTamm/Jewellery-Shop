{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineStore } from \"pinia\";\nimport AuthService from \"@/services/account.service\";\nexport const useAppStore = defineStore(\"auth\", {\n  state() {\n    return {\n      user: null,\n      SearchText: \"\",\n      role: \"\"\n    };\n  },\n\n  getters: {\n    isUserLoggedIn(state) {\n      return !!state.user && !!state.user.accessToken;\n    }\n\n  },\n  actions: {\n    loadAuthState() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n\n      if (this.user) {\n        this.role = this.user.role;\n      }\n\n      this.SearchText = \"\";\n    },\n\n    logout() {\n      this.SearchText = \"\";\n      this.role = \"\";\n      this.user = null;\n      localStorage.removeItem(\"user\");\n    },\n\n    async login(user) {\n      const response = await AuthService.login(user);\n\n      if (!response.accessToken) {\n        this.logout();\n        throw new Error(\"Whoops, no access token found!\");\n      }\n\n      this.user = response;\n\n      if (this.user) {\n        this.role = this.user.role;\n      }\n\n      localStorage.setItem(\"user\", JSON.stringify(response));\n      return response;\n    },\n\n    register(user) {\n      this.user = null;\n      return AuthService.register(user);\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","AuthService","useAppStore","state","user","SearchText","role","getters","isUserLoggedIn","accessToken","actions","loadAuthState","JSON","parse","localStorage","getItem","logout","removeItem","login","response","Error","setItem","stringify","register"],"sources":["D:/CT449/shoponline/src/stores/app.store.js"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport AuthService from \"@/services/account.service\";\n\nexport const useAppStore = defineStore(\"auth\", {\n  state() {\n    return {\n      user: null,\n      SearchText: \"\",\n      role: \"\",\n    };\n  },\n  getters: {\n    isUserLoggedIn(state) {\n      return !!state.user && !!state.user.accessToken;\n    },\n  },\n  actions: {\n    loadAuthState() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n      if (this.user) {\n        this.role = this.user.role;\n      }\n      this.SearchText = \"\";\n    },\n    logout() {\n      this.SearchText = \"\";\n      this.role = \"\";\n      this.user = null;\n      localStorage.removeItem(\"user\");\n    },\n    async login(user) {\n      const response = await AuthService.login(user);\n\n      if (!response.accessToken) {\n        this.logout();\n        throw new Error(\"Whoops, no access token found!\");\n      }\n\n      this.user = response;\n      if (this.user) {\n        this.role = this.user.role;\n      }\n\n      localStorage.setItem(\"user\", JSON.stringify(response));\n\n      return response;\n    },\n    register(user) {\n      this.user = null;\n      return AuthService.register(user);\n    },\n  },\n});\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AAEA,OAAO,MAAMC,WAAW,GAAGF,WAAW,CAAC,MAAD,EAAS;EAC7CG,KAAK,GAAG;IACN,OAAO;MACLC,IAAI,EAAE,IADD;MAELC,UAAU,EAAE,EAFP;MAGLC,IAAI,EAAE;IAHD,CAAP;EAKD,CAP4C;;EAQ7CC,OAAO,EAAE;IACPC,cAAc,CAACL,KAAD,EAAQ;MACpB,OAAO,CAAC,CAACA,KAAK,CAACC,IAAR,IAAgB,CAAC,CAACD,KAAK,CAACC,IAAN,CAAWK,WAApC;IACD;;EAHM,CARoC;EAa7CC,OAAO,EAAE;IACPC,aAAa,GAAG;MACd,KAAKP,IAAL,GAAYQ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAZ;;MACA,IAAI,KAAKX,IAAT,EAAe;QACb,KAAKE,IAAL,GAAY,KAAKF,IAAL,CAAUE,IAAtB;MACD;;MACD,KAAKD,UAAL,GAAkB,EAAlB;IACD,CAPM;;IAQPW,MAAM,GAAG;MACP,KAAKX,UAAL,GAAkB,EAAlB;MACA,KAAKC,IAAL,GAAY,EAAZ;MACA,KAAKF,IAAL,GAAY,IAAZ;MACAU,YAAY,CAACG,UAAb,CAAwB,MAAxB;IACD,CAbM;;IAcP,MAAMC,KAAN,CAAYd,IAAZ,EAAkB;MAChB,MAAMe,QAAQ,GAAG,MAAMlB,WAAW,CAACiB,KAAZ,CAAkBd,IAAlB,CAAvB;;MAEA,IAAI,CAACe,QAAQ,CAACV,WAAd,EAA2B;QACzB,KAAKO,MAAL;QACA,MAAM,IAAII,KAAJ,CAAU,gCAAV,CAAN;MACD;;MAED,KAAKhB,IAAL,GAAYe,QAAZ;;MACA,IAAI,KAAKf,IAAT,EAAe;QACb,KAAKE,IAAL,GAAY,KAAKF,IAAL,CAAUE,IAAtB;MACD;;MAEDQ,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BT,IAAI,CAACU,SAAL,CAAeH,QAAf,CAA7B;MAEA,OAAOA,QAAP;IACD,CA9BM;;IA+BPI,QAAQ,CAACnB,IAAD,EAAO;MACb,KAAKA,IAAL,GAAY,IAAZ;MACA,OAAOH,WAAW,CAACsB,QAAZ,CAAqBnB,IAArB,CAAP;IACD;;EAlCM;AAboC,CAAT,CAA/B"},"metadata":{},"sourceType":"module"}