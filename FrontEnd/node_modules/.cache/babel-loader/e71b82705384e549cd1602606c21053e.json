{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport ContactService from \"@/services/contact.service\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup.string().required(\"Tên phải có giá trị.\").min(2, \"Tên phải ít nhất 2 ký tự.\").max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\")\n    });\n    return {\n      product: {\n        type: Object,\n        require: true\n      },\n      productFormSchema,\n      file: [],\n      colors: [],\n      quantitys: [],\n      previousNameFile: []\n    };\n  },\n\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n      console.log(this.file);\n      console.log(this.product);\n      console.log(this.previousNameFile);\n      console.log(this.previousNameFile.length);\n    },\n\n    addColor() {\n      this.colors.push(this.product.color);\n      this.quantitys.push(this.product.quantity);\n      console.log(this.colors);\n      console.log(this.quantitys);\n      this.product.color = \"\";\n      this.product.quantity = \"\";\n    },\n\n    async getProduct(id) {\n      try {\n        this.product = await ContactService.get(id);\n      } catch (error) {\n        console.log(error); // Chuyển sang trang NotFound đồng thời giữ cho URL không đổi\n\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1)\n          },\n          query: this.$route.query,\n          hash: this.$route.hash\n        });\n      }\n    },\n\n    async updateProduct(data) {\n      try {\n        this.$router.push({\n          name: \"AdminAllProduct\"\n        });\n        await ContactService.update(this.product._id, data);\n        this.message = \"Liên hệ được cập nhật thành công.\";\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    test() {\n      console.log(this.product.img);\n    }\n\n  },\n\n  created() {\n    this.getProduct(this.id);\n    this.message = \"\";\n  }\n\n};","map":{"version":3,"mappings":";AAgGA,OAAO,KAAKA,GAAZ,MAAqB,KAArB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,YAAtB,QAA0C,cAA1C;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAEA,eAAe;EACbC,UAAU,EAAE;IACVJ,IADU;IAEVC,KAFU;IAGVC;EAHU,CADC;EAMbG,KAAK,EAAE;IACLC,EAAE,EAAE;MAAEC,IAAI,EAAEC,MAAR;MAAgBC,QAAQ,EAAE;IAA1B;EADC,CANM;;EASbC,IAAI,GAAG;IACL,MAAMC,iBAAgB,GAAIZ,GAAG,CAACa,MAAJ,GAAaC,KAAb,CAAmB;MAC3CC,IAAI,EAAEf,GAAE,CACLgB,MADG,GAEHN,QAFG,CAEM,sBAFN,EAGHO,GAHG,CAGC,CAHD,EAGI,2BAHJ,EAIHC,GAJG,CAIC,GAJD,EAIM,8BAJN,CADqC;MAM3CC,GAAG,EAAEnB,GAAG,CAACoB,KAAJ,EANsC;MAO3CC,QAAQ,EAAErB,GAAG,CAACgB,MAAJ,GAAaN,QAAb,CAAsB,sBAAtB,CAPiC;MAQ3CY,OAAO,EAAEtB,GAAE,CACRgB,MADM,GAENN,QAFM,CAEG,iCAFH,EAGNO,GAHM,CAGF,CAHE,EAGC,2CAHD,EAINC,GAJM,CAIF,EAJE,EAIE,yBAJF,CARkC;MAa3CK,OAAO,EAAEvB,GAAE,CACRgB,MADM,GAENN,QAFM,CAEG,iCAFH,EAGNO,GAHM,CAGF,CAHE,EAGC,2CAHD,EAINC,GAJM,CAIF,EAJE,EAIE,yBAJF;IAbkC,CAAnB,CAA1B;IAmBA,OAAO;MACLM,OAAO,EAAE;QACPhB,IAAI,EAAEiB,MADC;QAEPC,OAAO,EAAE;MAFF,CADJ;MAKLd,iBALK;MAMLe,IAAI,EAAE,EAND;MAOLC,MAAM,EAAE,EAPH;MAQLC,SAAS,EAAE,EARN;MASLC,gBAAgB,EAAE;IATb,CAAP;EAWD,CAxCY;;EAyCbC,OAAO,EAAE;IACPC,gBAAgB,GAAG;MACjB,KAAKL,IAAL,CAAUM,IAAV,CAAe,KAAKC,KAAL,CAAWP,IAAX,CAAgBQ,KAAhB,CAAsB,CAAtB,EAAyBpB,IAAxC;MACA,KAAKS,OAAL,CAAaL,GAAb,GAAmB,KAAKQ,IAAxB;MACA,KAAKG,gBAAL,GAAwB,KAAKH,IAA7B;MACAS,OAAO,CAACC,GAAR,CAAY,KAAKV,IAAjB;MACAS,OAAO,CAACC,GAAR,CAAY,KAAKb,OAAjB;MACAY,OAAO,CAACC,GAAR,CAAY,KAAKP,gBAAjB;MACAM,OAAO,CAACC,GAAR,CAAY,KAAKP,gBAAL,CAAsBQ,MAAlC;IACD,CATM;;IAUPC,QAAQ,GAAG;MACT,KAAKX,MAAL,CAAYK,IAAZ,CAAiB,KAAKT,OAAL,CAAagB,KAA9B;MACA,KAAKX,SAAL,CAAeI,IAAf,CAAoB,KAAKT,OAAL,CAAaH,QAAjC;MACAe,OAAO,CAACC,GAAR,CAAY,KAAKT,MAAjB;MACAQ,OAAO,CAACC,GAAR,CAAY,KAAKR,SAAjB;MACA,KAAKL,OAAL,CAAagB,KAAb,GAAqB,EAArB;MACA,KAAKhB,OAAL,CAAaH,QAAb,GAAwB,EAAxB;IACD,CAjBM;;IAkBP,MAAMoB,UAAN,CAAiBlC,EAAjB,EAAqB;MACnB,IAAI;QACF,KAAKiB,OAAL,GAAe,MAAMpB,cAAc,CAACsC,GAAf,CAAmBnC,EAAnB,CAArB;MACF,CAFA,CAEE,OAAOoC,KAAP,EAAc;QACdP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EADc,CAEd;;QACA,KAAKC,OAAL,CAAaX,IAAb,CAAkB;UAChBlB,IAAI,EAAE,UADU;UAEhB8B,MAAM,EAAE;YACNC,SAAS,EAAE,KAAKC,MAAL,CAAYC,IAAZ,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4BC,KAA5B,CAAkC,CAAlC;UADL,CAFQ;UAKhBC,KAAK,EAAE,KAAKJ,MAAL,CAAYI,KALH;UAMhBC,IAAI,EAAE,KAAKL,MAAL,CAAYK;QANF,CAAlB;MAQF;IACD,CAjCM;;IAkCP,MAAMC,aAAN,CAAoB1C,IAApB,EAA0B;MACxB,IAAI;QACF,KAAKiC,OAAL,CAAaX,IAAb,CAAkB;UAAElB,IAAI,EAAE;QAAR,CAAlB;QACA,MAAMX,cAAc,CAACkD,MAAf,CAAsB,KAAK9B,OAAL,CAAa+B,GAAnC,EAAwC5C,IAAxC,CAAN;QACA,KAAK6C,OAAL,GAAe,mCAAf;MACF,CAJA,CAIE,OAAOb,KAAP,EAAc;QACdP,OAAO,CAACC,GAAR,CAAYM,KAAZ;MACF;IACD,CA1CM;;IA2CPc,IAAI,GAAG;MACLrB,OAAO,CAACC,GAAR,CAAY,KAAKb,OAAL,CAAaL,GAAzB;IACD;;EA7CM,CAzCI;;EAwFbuC,OAAO,GAAG;IACR,KAAKjB,UAAL,CAAgB,KAAKlC,EAArB;IACA,KAAKiD,OAAL,GAAe,EAAf;EACD;;AA3FY,CAAf","names":["yup","Form","Field","ErrorMessage","ContactService","components","props","id","type","String","required","data","productFormSchema","object","shape","name","string","min","max","img","array","quantity","BaPrice","PrPrice","product","Object","require","file","colors","quantitys","previousNameFile","methods","handleFileUpload","push","$refs","files","console","log","length","addColor","color","getProduct","get","error","$router","params","pathMatch","$route","path","split","slice","query","hash","updateProduct","update","_id","message","test","created"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\components\\AdminEditProduct.vue"],"sourcesContent":["<template>\n  <h3>Sửa sản phẩm</h3>\n  <Form @submit=\"updateProduct(product)\" :validation-schema=\"productFormSchema\">\n    <div class=\"mb-3\">\n      <label for=\"name\" class=\"form-label\">Tên sản phẩm</label>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.name\"\n        id=\"name\"\n        name=\"name\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"img\" class=\"form-label\">Hình Ảnh</label>\n      <input\n        id=\"img\"\n        name=\"img\"\n        type=\"file\"\n        @change=\"handleFileUpload\"\n        @click=\"handleFileName\"\n        ref=\"file\"\n        class=\"form-control\"\n        multiple\n      />\n      <!-- <div class=\"sumImg\" v-if=\"previousNameFile.length > 0\">\n        <div\n          class=\"FileNameItem\"\n          v-for=\"(FileName, index) in previousNameFile\"\n          :key=\"index\"\n        > -->\n      {{ FileName }}\n      <!-- </div> -->\n      <!-- </div> -->\n      <ErrorMessage name=\"img\" class=\"error-feedback\" />\n    </div>\n    <!-- Màu sắc -->\n    <div class=\"mb-3\">\n      <label for=\"color\" class=\"form-label\">Màu sắc</label>\n      <Field\n        id=\"color\"\n        name=\"color\"\n        type=\"text\"\n        class=\"form-control\"\n        ref=\"color\"\n        v-model=\"product.color\"\n      />\n      <ErrorMessage name=\"color\" class=\"error-feedback\" />\n    </div>\n    <!-- Số lượng -->\n    <div class=\"mb-3\">\n      <label for=\"quantity\" class=\"form-label\">Số lượng</label>\n      <Field\n        id=\"quantity\"\n        name=\"quantity\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.quantity\"\n      />\n      <ErrorMessage name=\"quantity\" class=\"error-feedback\" />\n    </div>\n    <div class=\"add_color\" @click=\"addColor\">\n      <span>Thêm màu</span>\n    </div>\n    <!-- Giá -->\n    <div class=\"mb-3\">\n      <label for=\"BaPrice\" class=\"form-label\">Giá Gốc</label>\n      <Field\n        id=\"BaPrice\"\n        name=\"BaPrice\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.BaPrice\"\n      />\n      <ErrorMessage name=\"BaPrice\" class=\"error-feedback\" />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"PrPrice\" class=\"form-label\">Giá Khuyến Mãi</label>\n      <Field\n        id=\"PrPrice\"\n        name=\"PrPrice\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.PrPrice\"\n      />\n      <ErrorMessage name=\"PrPrice\" class=\"error-feedback\" />\n    </div>\n    <div class=\"btnSM\">\n      <button type=\"submit\" class=\"btn btn-primary\" @click=\"test\">\n        Lưu lại\n      </button>\n    </div>\n  </Form>\n</template>\n\n<script>\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport ContactService from \"@/services/contact.service\";\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  props: {\n    id: { type: String, required: true },\n  },\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup\n        .string()\n        .required(\"Tên phải có giá trị.\")\n        .min(2, \"Tên phải ít nhất 2 ký tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n    });\n    return {\n      product: {\n        type: Object,\n        require: true,\n      },\n      productFormSchema,\n      file: [],\n      colors: [],\n      quantitys: [],\n      previousNameFile: [],\n    };\n  },\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n      console.log(this.file);\n      console.log(this.product);\n      console.log(this.previousNameFile);\n      console.log(this.previousNameFile.length);\n    },\n    addColor() {\n      this.colors.push(this.product.color);\n      this.quantitys.push(this.product.quantity);\n      console.log(this.colors);\n      console.log(this.quantitys);\n      this.product.color = \"\";\n      this.product.quantity = \"\";\n    },\n    async getProduct(id) {\n      try {\n        this.product = await ContactService.get(id);\n      } catch (error) {\n        console.log(error);\n        // Chuyển sang trang NotFound đồng thời giữ cho URL không đổi\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1),\n          },\n          query: this.$route.query,\n          hash: this.$route.hash,\n        });\n      }\n    },\n    async updateProduct(data) {\n      try {\n        this.$router.push({ name: \"AdminAllProduct\" });\n        await ContactService.update(this.product._id, data);\n        this.message = \"Liên hệ được cập nhật thành công.\";\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    test() {\n      console.log(this.product.img);\n    },\n  },\n  created() {\n    this.getProduct(this.id);\n    this.message = \"\";\n  },\n};\n</script>\n\n<style cope>\n.btnSM {\n  text-align: right;\n  padding: 0 12px;\n}\n\n.btn-primary {\n  padding: 12px 24px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}