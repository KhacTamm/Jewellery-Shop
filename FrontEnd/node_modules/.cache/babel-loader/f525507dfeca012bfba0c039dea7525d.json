{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineStore } from \"pinia\";\nimport AuthService from \"@/services/account.service\"; // import ProductService from \"@/services/product.service\";\n\nexport const useAppStore = defineStore(\"auth\", {\n  state() {\n    return {\n      user: {},\n      SearchText: \"\"\n    };\n  },\n\n  getters: {\n    isUserLoggedIn(state) {\n      return !!state.user && !!state.user.accessToken;\n    }\n\n  },\n  actions: {\n    loadAuthState() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n    },\n\n    logout() {\n      this.user = {};\n      localStorage.removeItem(\"user\");\n    },\n\n    async login(user) {\n      const response = await AuthService.login(user);\n\n      if (!response.accessToken) {\n        this.logout();\n        throw new Error(\"Whoops, no access token found!\");\n      }\n\n      this.user = response;\n      localStorage.setItem(\"user\", JSON.stringify(response));\n      return response;\n    },\n\n    register(user) {\n      this.user = {};\n      return AuthService.register(user);\n    } // async retrieveProducts() {\n    //   try {\n    //     this.products = await ProductService.getAll();\n    //   } catch (error) {\n    //     console.log(error);\n    //   }\n    // },\n\n\n  }\n});","map":{"version":3,"names":["defineStore","AuthService","useAppStore","state","user","SearchText","getters","isUserLoggedIn","accessToken","actions","loadAuthState","JSON","parse","localStorage","getItem","logout","removeItem","login","response","Error","setItem","stringify","register"],"sources":["D:/CT449/shoponline/src/stores/app.store.js"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport AuthService from \"@/services/account.service\";\n// import ProductService from \"@/services/product.service\";\n\nexport const useAppStore = defineStore(\"auth\", {\n  state() {\n    return {\n      user: {},\n      SearchText: \"\",\n    };\n  },\n  getters: {\n    isUserLoggedIn(state) {\n      return !!state.user && !!state.user.accessToken;\n    },\n  },\n  actions: {\n    loadAuthState() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n    },\n    logout() {\n      this.user = {};\n      localStorage.removeItem(\"user\");\n    },\n    async login(user) {\n      const response = await AuthService.login(user);\n\n      if (!response.accessToken) {\n        this.logout();\n        throw new Error(\"Whoops, no access token found!\");\n      }\n\n      this.user = response;\n\n      localStorage.setItem(\"user\", JSON.stringify(response));\n\n      return response;\n    },\n    register(user) {\n      this.user = {};\n      return AuthService.register(user);\n    },\n    // async retrieveProducts() {\n    //   try {\n    //     this.products = await ProductService.getAll();\n    //   } catch (error) {\n    //     console.log(error);\n    //   }\n    // },\n  },\n});\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,WAAP,MAAwB,4BAAxB,C,CACA;;AAEA,OAAO,MAAMC,WAAW,GAAGF,WAAW,CAAC,MAAD,EAAS;EAC7CG,KAAK,GAAG;IACN,OAAO;MACLC,IAAI,EAAE,EADD;MAELC,UAAU,EAAE;IAFP,CAAP;EAID,CAN4C;;EAO7CC,OAAO,EAAE;IACPC,cAAc,CAACJ,KAAD,EAAQ;MACpB,OAAO,CAAC,CAACA,KAAK,CAACC,IAAR,IAAgB,CAAC,CAACD,KAAK,CAACC,IAAN,CAAWI,WAApC;IACD;;EAHM,CAPoC;EAY7CC,OAAO,EAAE;IACPC,aAAa,GAAG;MACd,KAAKN,IAAL,GAAYO,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAZ;IACD,CAHM;;IAIPC,MAAM,GAAG;MACP,KAAKX,IAAL,GAAY,EAAZ;MACAS,YAAY,CAACG,UAAb,CAAwB,MAAxB;IACD,CAPM;;IAQP,MAAMC,KAAN,CAAYb,IAAZ,EAAkB;MAChB,MAAMc,QAAQ,GAAG,MAAMjB,WAAW,CAACgB,KAAZ,CAAkBb,IAAlB,CAAvB;;MAEA,IAAI,CAACc,QAAQ,CAACV,WAAd,EAA2B;QACzB,KAAKO,MAAL;QACA,MAAM,IAAII,KAAJ,CAAU,gCAAV,CAAN;MACD;;MAED,KAAKf,IAAL,GAAYc,QAAZ;MAEAL,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BT,IAAI,CAACU,SAAL,CAAeH,QAAf,CAA7B;MAEA,OAAOA,QAAP;IACD,CArBM;;IAsBPI,QAAQ,CAAClB,IAAD,EAAO;MACb,KAAKA,IAAL,GAAY,EAAZ;MACA,OAAOH,WAAW,CAACqB,QAAZ,CAAqBlB,IAArB,CAAP;IACD,CAzBM,CA0BP;IACA;IACA;IACA;IACA;IACA;IACA;;;EAhCO;AAZoC,CAAT,CAA/B"},"metadata":{},"sourceType":"module"}