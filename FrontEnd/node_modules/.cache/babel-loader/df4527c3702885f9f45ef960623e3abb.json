{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport ContactService from \"@/services/contact.service\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup.string().required(\"Tên phải có giá trị.\").min(2, \"Tên phải ít nhất 2 ký tự.\").max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\")\n    });\n    return {\n      product: {\n        type: Object,\n        require: true\n      },\n      productFormSchema,\n      message: \"\"\n    };\n  },\n\n  methods: {\n    async getProduct(id) {\n      try {\n        this.product = await ContactService.get(id);\n      } catch (error) {\n        console.log(error); // Chuyển sang trang NotFound đồng thời giữ cho URL không đổi\n\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1)\n          },\n          query: this.$route.query,\n          hash: this.$route.hash\n        });\n      }\n    },\n\n    async updateProduct(data) {\n      try {\n        this.$router.push({\n          name: \"AdminAllProduct\"\n        });\n        await ContactService.update(this.product._id, data);\n        this.message = \"Liên hệ được cập nhật thành công.\";\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    test() {\n      console.log(this.product.img);\n    }\n\n  },\n\n  created() {\n    this.getProduct(this.id);\n    this.message = \"\";\n  }\n\n};","map":{"version":3,"mappings":";AAgGA,OAAO,KAAKA,GAAZ,MAAqB,KAArB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,YAAtB,QAA0C,cAA1C;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAEA,eAAe;EACbC,UAAU,EAAE;IACVJ,IADU;IAEVC,KAFU;IAGVC;EAHU,CADC;EAMbG,KAAK,EAAE;IACLC,EAAE,EAAE;MAAEC,IAAI,EAAEC,MAAR;MAAgBC,QAAQ,EAAE;IAA1B;EADC,CANM;;EASbC,IAAI,GAAG;IACL,MAAMC,iBAAgB,GAAIZ,GAAG,CAACa,MAAJ,GAAaC,KAAb,CAAmB;MAC3CC,IAAI,EAAEf,GAAE,CACLgB,MADG,GAEHN,QAFG,CAEM,sBAFN,EAGHO,GAHG,CAGC,CAHD,EAGI,2BAHJ,EAIHC,GAJG,CAIC,GAJD,EAIM,8BAJN,CADqC;MAM3CC,GAAG,EAAEnB,GAAG,CAACoB,KAAJ,EANsC;MAO3CC,QAAQ,EAAErB,GAAG,CAACgB,MAAJ,GAAaN,QAAb,CAAsB,sBAAtB,CAPiC;MAQ3CY,OAAO,EAAEtB,GAAE,CACRgB,MADM,GAENN,QAFM,CAEG,iCAFH,EAGNO,GAHM,CAGF,CAHE,EAGC,2CAHD,EAINC,GAJM,CAIF,EAJE,EAIE,yBAJF,CARkC;MAa3CK,OAAO,EAAEvB,GAAE,CACRgB,MADM,GAENN,QAFM,CAEG,iCAFH,EAGNO,GAHM,CAGF,CAHE,EAGC,2CAHD,EAINC,GAJM,CAIF,EAJE,EAIE,yBAJF;IAbkC,CAAnB,CAA1B;IAmBA,OAAO;MACLM,OAAO,EAAE;QACPhB,IAAI,EAAEiB,MADC;QAEPC,OAAO,EAAE;MAFF,CADJ;MAKLd,iBALK;MAMLe,OAAO,EAAE;IANJ,CAAP;EAQD,CArCY;;EAsCbC,OAAO,EAAE;IACP,MAAMC,UAAN,CAAiBtB,EAAjB,EAAqB;MACnB,IAAI;QACF,KAAKiB,OAAL,GAAe,MAAMpB,cAAc,CAAC0B,GAAf,CAAmBvB,EAAnB,CAArB;MACF,CAFA,CAEE,OAAOwB,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADc,CAEd;;QACA,KAAKG,OAAL,CAAaC,IAAb,CAAkB;UAChBpB,IAAI,EAAE,UADU;UAEhBqB,MAAM,EAAE;YACNC,SAAS,EAAE,KAAKC,MAAL,CAAYC,IAAZ,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4BC,KAA5B,CAAkC,CAAlC;UADL,CAFQ;UAKhBC,KAAK,EAAE,KAAKJ,MAAL,CAAYI,KALH;UAMhBC,IAAI,EAAE,KAAKL,MAAL,CAAYK;QANF,CAAlB;MAQF;IACD,CAhBM;;IAiBP,MAAMC,aAAN,CAAoBjC,IAApB,EAA0B;MACxB,IAAI;QACF,KAAKuB,OAAL,CAAaC,IAAb,CAAkB;UAAEpB,IAAI,EAAE;QAAR,CAAlB;QACA,MAAMX,cAAc,CAACyC,MAAf,CAAsB,KAAKrB,OAAL,CAAasB,GAAnC,EAAwCnC,IAAxC,CAAN;QACA,KAAKgB,OAAL,GAAe,mCAAf;MACF,CAJA,CAIE,OAAOI,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACF;IACD,CAzBM;;IA0BPgB,IAAI,GAAG;MACLf,OAAO,CAACC,GAAR,CAAY,KAAKT,OAAL,CAAaL,GAAzB;IACD;;EA5BM,CAtCI;;EAoEb6B,OAAO,GAAG;IACR,KAAKnB,UAAL,CAAgB,KAAKtB,EAArB;IACA,KAAKoB,OAAL,GAAe,EAAf;EACD;;AAvEY,CAAf","names":["yup","Form","Field","ErrorMessage","ContactService","components","props","id","type","String","required","data","productFormSchema","object","shape","name","string","min","max","img","array","quantity","BaPrice","PrPrice","product","Object","require","message","methods","getProduct","get","error","console","log","$router","push","params","pathMatch","$route","path","split","slice","query","hash","updateProduct","update","_id","test","created"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\components\\AdminEditProduct.vue"],"sourcesContent":["<template>\n  <h3>Sửa sản phẩm</h3>\n  <Form @submit=\"updateProduct(product)\" :validation-schema=\"productFormSchema\">\n    <div class=\"mb-3\">\n      <label for=\"name\" class=\"form-label\">Tên sản phẩm</label>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.name\"\n        id=\"name\"\n        name=\"name\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"img\" class=\"form-label\">Hình Ảnh</label>\n      <input\n        id=\"img\"\n        name=\"img\"\n        type=\"file\"\n        @change=\"handleFileUpload\"\n        @click=\"handleFileName\"\n        ref=\"file\"\n        class=\"form-control\"\n        multiple\n      />\n      <!-- <div class=\"sumImg\" v-if=\"previousNameFile.length > 0\">\n        <div\n          class=\"FileNameItem\"\n          v-for=\"(FileName, index) in previousNameFile\"\n          :key=\"index\"\n        > -->\n      {{ FileName }}\n      <!-- </div> -->\n      <!-- </div> -->\n      <ErrorMessage name=\"img\" class=\"error-feedback\" />\n    </div>\n    <!-- Màu sắc -->\n    <div class=\"mb-3\">\n      <label for=\"color\" class=\"form-label\">Màu sắc</label>\n      <Field\n        id=\"color\"\n        name=\"color\"\n        type=\"text\"\n        class=\"form-control\"\n        ref=\"color\"\n        v-model=\"product.color\"\n      />\n      <ErrorMessage name=\"color\" class=\"error-feedback\" />\n    </div>\n    <!-- Số lượng -->\n    <div class=\"mb-3\">\n      <label for=\"quantity\" class=\"form-label\">Số lượng</label>\n      <Field\n        id=\"quantity\"\n        name=\"quantity\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.quantity\"\n      />\n      <ErrorMessage name=\"quantity\" class=\"error-feedback\" />\n    </div>\n    <div class=\"add_color\" @click=\"addColor\">\n      <span>Thêm màu</span>\n    </div>\n    <!-- Giá -->\n    <div class=\"mb-3\">\n      <label for=\"BaPrice\" class=\"form-label\">Giá Gốc</label>\n      <Field\n        id=\"BaPrice\"\n        name=\"BaPrice\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.BaPrice\"\n      />\n      <ErrorMessage name=\"BaPrice\" class=\"error-feedback\" />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"PrPrice\" class=\"form-label\">Giá Khuyến Mãi</label>\n      <Field\n        id=\"PrPrice\"\n        name=\"PrPrice\"\n        type=\"text\"\n        class=\"form-control\"\n        v-model=\"product.PrPrice\"\n      />\n      <ErrorMessage name=\"PrPrice\" class=\"error-feedback\" />\n    </div>\n    <div class=\"btnSM\">\n      <button type=\"submit\" class=\"btn btn-primary\" @click=\"test\">\n        Lưu lại\n      </button>\n    </div>\n  </Form>\n</template>\n\n<script>\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport ContactService from \"@/services/contact.service\";\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  props: {\n    id: { type: String, required: true },\n  },\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup\n        .string()\n        .required(\"Tên phải có giá trị.\")\n        .min(2, \"Tên phải ít nhất 2 ký tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n    });\n    return {\n      product: {\n        type: Object,\n        require: true,\n      },\n      productFormSchema,\n      message: \"\",\n    };\n  },\n  methods: {\n    async getProduct(id) {\n      try {\n        this.product = await ContactService.get(id);\n      } catch (error) {\n        console.log(error);\n        // Chuyển sang trang NotFound đồng thời giữ cho URL không đổi\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1),\n          },\n          query: this.$route.query,\n          hash: this.$route.hash,\n        });\n      }\n    },\n    async updateProduct(data) {\n      try {\n        this.$router.push({ name: \"AdminAllProduct\" });\n        await ContactService.update(this.product._id, data);\n        this.message = \"Liên hệ được cập nhật thành công.\";\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    test() {\n      console.log(this.product.img);\n    },\n  },\n  created() {\n    this.getProduct(this.id);\n    this.message = \"\";\n  },\n};\n</script>\n\n<style cope>\n.btnSM {\n  text-align: right;\n  padding: 0 12px;\n}\n\n.btn-primary {\n  padding: 12px 24px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}