{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AdminService from \"@/services/admin.service\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup.string().required(\"Tên phải có giá trị.\").min(2, \"Tên phải ít nhất 2 ký tự.\").max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\")\n    });\n    return {\n      product: {\n        type: Object,\n        require: true\n      },\n      productFormSchema,\n      file: [],\n      quantitys: [],\n      previousNameFile: [],\n      imgLenght: []\n    };\n  },\n\n  computed: {\n    lengthImg() {\n      // return this.product.map((product) => {\n      const {\n        img\n      } = this.product;\n      return [img].join(\"\").trim(); // });\n    }\n\n  },\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n      console.log(this.file);\n      console.log(this.product);\n      console.log(this.previousNameFile);\n      console.log(this.previousNameFile.length);\n    },\n\n    addType() {\n      this.product.type = this.$refs.type.options[this.$refs.type.selectedIndex].text;\n    },\n\n    async getProduct(id) {\n      try {\n        this.product = await AdminService.get(id);\n        console.log(this.product);\n      } catch (error) {\n        console.log(error);\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1)\n          },\n          query: this.$route.query,\n          hash: this.$route.hash\n        });\n      }\n    },\n\n    async updateProduct(data) {\n      try {\n        await AdminService.update(this.product._id, data);\n        this.$router.push({\n          name: \"AdminAllProduct\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n  },\n\n  created() {\n    this.getProduct(this.id);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["yup","Form","Field","ErrorMessage","AdminService","components","props","id","type","String","required","data","productFormSchema","object","shape","name","string","min","max","img","array","quantity","BaPrice","PrPrice","product","Object","require","file","quantitys","previousNameFile","imgLenght","computed","lengthImg","join","trim","methods","handleFileUpload","push","$refs","files","console","log","length","addType","options","selectedIndex","text","getProduct","get","error","$router","params","pathMatch","$route","path","split","slice","query","hash","updateProduct","update","_id","created"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\components\\AdminEditProduct.vue"],"sourcesContent":["<template>\n  <div class=\"titileAdminView\">\n    <h3>Sửa sản phẩm</h3>\n  </div>\n  <div class=\"wapperAdmin\">\n    <Form\n      @submit=\"updateProduct(product)\"\n      :validation-schema=\"productFormSchema\"\n    >\n      <div class=\"mb-3 type\">\n        <label for=\"type\" class=\"form-label\">Phân loại</label>\n        <select\n          class=\"form-select form-select-sm checkbox-select-all-options\"\n          name=\"action\"\n          @click=\"addType\"\n          required\n          ref=\"type\"\n        >\n          <option value=\"\">{{ product.type }}</option>\n          <option value=\"1\">Bông tai</option>\n          <option value=\"2\">Nhẫn</option>\n          <option value=\"3\">Vòng tay</option>\n          <option value=\"4\">Dây chuyền</option>\n        </select>\n      </div>\n      <!-- Thương hiệu -->\n      <div class=\"mb-3\">\n        <label for=\"brand\" class=\"form-label\">Tên thương hiệu</label>\n        <Field\n          id=\"brand\"\n          name=\"brand\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.brand\"\n        />\n        <ErrorMessage name=\"brand\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">Tên sản phẩm</label>\n        <Field\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.name\"\n          id=\"name\"\n          name=\"name\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"img\" class=\"form-label\">Hình Ảnh</label>\n        <Field\n          id=\"img\"\n          name=\"img\"\n          type=\"file\"\n          @change=\"handleFileUpload\"\n          @click=\"handleFileName\"\n          ref=\"file\"\n          class=\"form-control\"\n          multiple\n        />\n        <!-- <div class=\"sumImg\" v-if=\"product.img > 0\"> -->\n        <!-- <div\n          class=\"FileNameItem\"\n          v-for=\"(FileName, index) in `${lengthImg}`\"\n          :key=\"index\"\n        > -->\n        {{ lengthImg }}\n        <!-- <img\n            class=\"imgProduct\"\n            :src=\"`${require('@/assets/img/product/' + FileName)}`\"\n          /> -->\n        <!-- {{ FileName }} -->\n        <!-- </div> -->\n      </div>\n      <!-- </div> -->\n      <!-- Chất Liệu < -->\n      <div class=\"mb-3\">\n        <label for=\"material\" class=\"form-label\">Chất Liệu</label>\n        <Field\n          id=\"material\"\n          name=\"material\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.material\"\n        />\n        <ErrorMessage name=\"name\" class=\"error-feedback\" />\n      </div>\n      <!-- Phong cách -->\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">Phong cách</label>\n        <Field\n          id=\"style\"\n          name=\"style\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.style\"\n        />\n        <ErrorMessage name=\"style\" class=\"error-feedback\" />\n      </div>\n      <!-- Số lượng -->\n      <div class=\"mb-3\">\n        <label for=\"quantity\" class=\"form-label\">Số lượng</label>\n        <Field\n          id=\"quantity\"\n          name=\"quantity\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.quantity\"\n        />\n        <ErrorMessage name=\"quantity\" class=\"error-feedback\" />\n      </div>\n      <!-- Giá -->\n      <div class=\"mb-3\">\n        <label for=\"BaPrice\" class=\"form-label\">Giá Gốc</label>\n        <Field\n          id=\"BaPrice\"\n          name=\"BaPrice\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.BaPrice\"\n        />\n        <ErrorMessage name=\"BaPrice\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"PrPrice\" class=\"form-label\">Giá Khuyến Mãi</label>\n        <Field\n          id=\"PrPrice\"\n          name=\"PrPrice\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.PrPrice\"\n        />\n        <ErrorMessage name=\"PrPrice\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"description\" class=\"form-label\">Mô tả</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          type=\"tex\"\n          class=\"form-control description\"\n          v-model=\"product.description\"\n        >\n        </textarea>\n        <ErrorMessage name=\"description\" class=\"error-feedback\" />\n      </div>\n      <div class=\"btnSM\">\n        <button type=\"submit\" class=\"btn btn-primary\">Lưu lại</button>\n      </div>\n    </Form>\n  </div>\n</template>\n\n<script>\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AdminService from \"@/services/admin.service\";\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  props: {\n    id: { type: String, required: true },\n  },\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup\n        .string()\n        .required(\"Tên phải có giá trị.\")\n        .min(2, \"Tên phải ít nhất 2 ký tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n    });\n    return {\n      product: {\n        type: Object,\n        require: true,\n      },\n      productFormSchema,\n      file: [],\n      quantitys: [],\n      previousNameFile: [],\n      imgLenght: [],\n    };\n  },\n  computed: {\n    lengthImg() {\n      // return this.product.map((product) => {\n      const { img } = this.product;\n      return [img].join(\"\").trim();\n      // });\n    },\n  },\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n      console.log(this.file);\n      console.log(this.product);\n      console.log(this.previousNameFile);\n      console.log(this.previousNameFile.length);\n    },\n    addType() {\n      this.product.type =\n        this.$refs.type.options[this.$refs.type.selectedIndex].text;\n    },\n    async getProduct(id) {\n      try {\n        this.product = await AdminService.get(id);\n        console.log(this.product);\n      } catch (error) {\n        console.log(error);\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1),\n          },\n          query: this.$route.query,\n          hash: this.$route.hash,\n        });\n      }\n    },\n    async updateProduct(data) {\n      try {\n        await AdminService.update(this.product._id, data);\n        this.$router.push({ name: \"AdminAllProduct\" });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n  created() {\n    this.getProduct(this.id);\n  },\n};\n</script>\n\n<style cope>\n@import \"@/assets/css/formProducts.css\";\n</style>\n"]},"metadata":{},"sourceType":"module"}