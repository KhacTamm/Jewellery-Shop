{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AdminService from \"@/services/admin.service\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup.string().required(\"Tên phải có giá trị.\").min(2, \"Tên phải ít nhất 2 ký tự.\").max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup.string().required(\"Không được để trống trường này.\").min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\").max(50, \"E-mail tối đa 50 ký tự.\")\n    });\n    return {\n      product: {\n        type: Object,\n        require: true\n      },\n      productFormSchema,\n      file: [],\n      quantitys: [],\n      previousNameFile: [],\n      imgLenght: [],\n      typeProducts: []\n    };\n  },\n\n  computed: {\n    filteredTypeT() {\n      return this.typeProducts;\n    },\n\n    filteredTypePCount() {\n      return this.filteredTypeT.length;\n    }\n\n  },\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n    },\n\n    addType() {\n      if (this.$refs.type.options[this.$refs.type.selectedIndex].value != -1) {\n        this.product.type = {\n          _id: this.$refs.type.options[this.$refs.type.selectedIndex].value,\n          name: this.$refs.type.options[this.$refs.type.selectedIndex].text\n        };\n        console.log(this.product.type);\n      }\n    },\n\n    async getProduct(id) {\n      try {\n        this.product = await AdminService.get(id);\n        console.log(this.product);\n      } catch (error) {\n        console.log(error);\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1)\n          },\n          query: this.$route.query,\n          hash: this.$route.hash\n        });\n      }\n    },\n\n    async updateProduct(data) {\n      try {\n        await AdminService.update(this.product._id, data);\n        this.$router.push({\n          name: \"AdminAllProduct\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async retrieveTypeP() {\n      try {\n        this.typeProducts = await AdminService.getAllTypeProducts();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n  },\n\n  created() {\n    this.getProduct(this.id);\n  },\n\n  mounted() {\n    this.retrieveTypeP();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["yup","Form","Field","ErrorMessage","AdminService","components","props","id","type","String","required","data","productFormSchema","object","shape","name","string","min","max","img","array","quantity","BaPrice","PrPrice","product","Object","require","file","quantitys","previousNameFile","imgLenght","typeProducts","computed","filteredTypeT","filteredTypePCount","length","methods","handleFileUpload","push","$refs","files","addType","options","selectedIndex","value","_id","text","console","log","getProduct","get","error","$router","params","pathMatch","$route","path","split","slice","query","hash","updateProduct","update","retrieveTypeP","getAllTypeProducts","created","mounted"],"sourceRoot":"","sources":["D:\\BaiTapLon\\FrontEnd\\src\\components\\AdminEditProduct.vue"],"sourcesContent":["<template>\n  <div class=\"titileAdminView\">\n    <h3>Sửa sản phẩm</h3>\n  </div>\n  <div class=\"wapperAdmin\">\n    <Form\n      @submit=\"updateProduct(product)\"\n      :validation-schema=\"productFormSchema\"\n    >\n      <div class=\"mb-3 type\">\n        <label for=\"type\" class=\"form-label\">Phân loại</label>\n        <select\n          class=\"form-select checkbox-select-all-options\"\n          name=\"action\"\n          required\n          ref=\"type\"\n          @click=\"addType\"\n        >\n          <option value=\"-1\">{{ product.type.name }}</option>\n          <option\n            v-for=\"(item, index) in filteredTypeT\"\n            :key=\"index\"\n            :value=\"`${item._id}`\"\n          >\n            {{ item.name }}\n          </option>\n        </select>\n      </div>\n      <!-- Thương hiệu -->\n      <div class=\"mb-3\">\n        <label for=\"brand\" class=\"form-label\">Tên thương hiệu</label>\n        <Field\n          id=\"brand\"\n          name=\"brand\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.brand\"\n        />\n        <ErrorMessage name=\"brand\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">Tên sản phẩm</label>\n        <Field\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.name\"\n          id=\"name\"\n          name=\"name\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"img\" class=\"form-label\">Hình Ảnh</label>\n        <Field\n          id=\"img\"\n          name=\"img\"\n          type=\"file\"\n          @change=\"handleFileUpload\"\n          @click=\"handleFileName\"\n          ref=\"file\"\n          class=\"form-control\"\n          multiple\n        />\n      </div>\n      <!-- Chất Liệu < -->\n      <div class=\"mb-3\">\n        <label for=\"material\" class=\"form-label\">Chất Liệu</label>\n        <Field\n          id=\"material\"\n          name=\"material\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.material\"\n        />\n        <ErrorMessage name=\"name\" class=\"error-feedback\" />\n      </div>\n      <!-- Phong cách -->\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">Phong cách</label>\n        <Field\n          id=\"style\"\n          name=\"style\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.style\"\n        />\n        <ErrorMessage name=\"style\" class=\"error-feedback\" />\n      </div>\n      <!-- Số lượng -->\n      <div class=\"mb-3\">\n        <label for=\"quantity\" class=\"form-label\">Số lượng</label>\n        <Field\n          id=\"quantity\"\n          name=\"quantity\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.quantity\"\n        />\n        <ErrorMessage name=\"quantity\" class=\"error-feedback\" />\n      </div>\n      <!-- Giá -->\n      <div class=\"mb-3\">\n        <label for=\"BaPrice\" class=\"form-label\">Giá Gốc</label>\n        <Field\n          id=\"BaPrice\"\n          name=\"BaPrice\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.BaPrice\"\n        />\n        <ErrorMessage name=\"BaPrice\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"PrPrice\" class=\"form-label\">Giá Khuyến Mãi</label>\n        <Field\n          id=\"PrPrice\"\n          name=\"PrPrice\"\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"product.PrPrice\"\n        />\n        <ErrorMessage name=\"PrPrice\" class=\"error-feedback\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"description\" class=\"form-label\">Mô tả</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          type=\"tex\"\n          class=\"form-control description\"\n          v-model=\"product.description\"\n        >\n        </textarea>\n        <ErrorMessage name=\"description\" class=\"error-feedback\" />\n      </div>\n      <div class=\"btnSM\">\n        <button type=\"submit\" class=\"btn btn-primary\">Lưu lại</button>\n      </div>\n    </Form>\n  </div>\n</template>\n\n<script>\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AdminService from \"@/services/admin.service\";\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  props: {\n    id: { type: String, required: true },\n  },\n  data() {\n    const productFormSchema = yup.object().shape({\n      name: yup\n        .string()\n        .required(\"Tên phải có giá trị.\")\n        .min(2, \"Tên phải ít nhất 2 ký tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      img: yup.array(),\n      quantity: yup.string().required(\"Tên phải có giá trị.\"),\n      BaPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n      PrPrice: yup\n        .string()\n        .required(\"Không được để trống trường này.\")\n        .min(4, \"Giá của sản phẩm phải tối thiểu 4 chữ số.\")\n        .max(50, \"E-mail tối đa 50 ký tự.\"),\n    });\n    return {\n      product: {\n        type: Object,\n        require: true,\n      },\n      productFormSchema,\n      file: [],\n      quantitys: [],\n      previousNameFile: [],\n      imgLenght: [],\n      typeProducts: [],\n    };\n  },\n  computed: {\n    filteredTypeT() {\n      return this.typeProducts;\n    },\n    filteredTypePCount() {\n      return this.filteredTypeT.length;\n    },\n  },\n  methods: {\n    handleFileUpload() {\n      this.file.push(this.$refs.file.files[0].name);\n      this.product.img = this.file;\n      this.previousNameFile = this.file;\n    },\n    addType() {\n      if (this.$refs.type.options[this.$refs.type.selectedIndex].value != -1) {\n        this.product.type = {\n          _id: this.$refs.type.options[this.$refs.type.selectedIndex].value,\n          name: this.$refs.type.options[this.$refs.type.selectedIndex].text,\n        };\n        console.log(this.product.type);\n      }\n    },\n    async getProduct(id) {\n      try {\n        this.product = await AdminService.get(id);\n        console.log(this.product);\n      } catch (error) {\n        console.log(error);\n        this.$router.push({\n          name: \"notfound\",\n          params: {\n            pathMatch: this.$route.path.split(\"/\").slice(1),\n          },\n          query: this.$route.query,\n          hash: this.$route.hash,\n        });\n      }\n    },\n    async updateProduct(data) {\n      try {\n        await AdminService.update(this.product._id, data);\n        this.$router.push({ name: \"AdminAllProduct\" });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async retrieveTypeP() {\n      try {\n        this.typeProducts = await AdminService.getAllTypeProducts();\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n  created() {\n    this.getProduct(this.id);\n  },\n  mounted() {\n    this.retrieveTypeP();\n  },\n};\n</script>\n\n<style cope>\n@import \"@/assets/css/formProducts.css\";\n</style>\n"]},"metadata":{},"sourceType":"module"}