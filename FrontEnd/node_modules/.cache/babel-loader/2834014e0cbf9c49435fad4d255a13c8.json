{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from \"pinia\";\nimport { useAuthStore } from \"@/stores/auth.store\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AccountService from \"@/services/account.service\";\nexport default {\n  // components: {\n  //   AppRegister,\n  // },\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n\n  data() {\n    const accountFormSchema = yup.object().shape({\n      username: yup.string().required(\"Vui lòng nhập trường này.\").min(2, \"Vui lòng tối thiểu 2 kí tự.\").max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      phone: yup.string().required(\"Vui lòng nhập trường này.\").matches(/((09|03|07|08|05)+([0-9]{8})\\b)/g, \"Số điện thoại không hợp lệ.\"),\n      password: yup.string().required(\"Vui lòng nhập trường này.\").min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\").max(8, \"Mật khẩu dài tối đa 8 kí tự.\"),\n      isConfirmed: yup.string().oneOf([yup.ref(\"password\"), null], \"Passwords must match\")\n    });\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true\n      }\n    };\n  },\n\n  methods: { ...mapActions(useAuthStore, [\"register\"]),\n\n    async handleRegister(user) {\n      this.message = \"\";\n      this.successful = false;\n      this.loading = true;\n\n      try {\n        const data = await this.createAccount(user);\n        this.message = data.message;\n        this.successful = true;\n        this.loading = false;\n      } catch (error) {\n        console.log(error);\n        this.message = \"Đã có lỗi xảy ra.\";\n        this.successful = false;\n        this.loading = false;\n      }\n    },\n\n    async createAccount(data) {\n      try {\n        this.$router.push({\n          name: \"home\"\n        });\n        await AccountService.registerAccount(data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAgFA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,YAAtB,QAA0C,cAA1C;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAEA,eAAe;EACb;EACA;EACA;EACAC,UAAU,EAAE;IACVJ,IADU;IAEVC,KAFU;IAGVC;EAHU,CAJC;;EASbG,IAAI,GAAG;IACL,MAAMC,iBAAgB,GAAIP,GAAG,CAACQ,MAAJ,GAAaC,KAAb,CAAmB;MAC3CC,QAAQ,EAAEV,GAAE,CACTW,MADO,GAEPC,QAFO,CAEE,2BAFF,EAGPC,GAHO,CAGH,CAHG,EAGA,6BAHA,EAIPC,GAJO,CAIH,GAJG,EAIE,8BAJF,CADiC;MAM3CC,KAAK,EAAEf,GAAE,CACNW,MADI,GAEJC,QAFI,CAEK,2BAFL,EAGJI,OAHI,CAIH,kCAJG,EAKH,6BALG,CANoC;MAa3CC,QAAQ,EAAEjB,GAAE,CACTW,MADO,GAEPC,QAFO,CAEE,2BAFF,EAGPC,GAHO,CAGH,CAHG,EAGA,sCAHA,EAIPC,GAJO,CAIH,CAJG,EAIA,8BAJA,CAbiC;MAkB3CI,WAAW,EAAElB,GAAE,CACZW,MADU,GAEVQ,KAFU,CAEJ,CAACnB,GAAG,CAACoB,GAAJ,CAAQ,UAAR,CAAD,EAAsB,IAAtB,CAFI,EAEyB,sBAFzB;IAlB8B,CAAnB,CAA1B;IAsBA,OAAO;MACLC,UAAU,EAAE,KADP;MAELC,OAAO,EAAE,KAFJ;MAGLC,OAAO,EAAE,EAHJ;MAILhB,iBAJK;MAKLiB,OAAO,EAAE;QACPC,IAAI,EAAEC,MADC;QAEPC,OAAO,EAAE;MAFF;IALJ,CAAP;EAUD,CA1CY;;EA2CbC,OAAO,EAAE,EACP,GAAG9B,UAAU,CAACC,YAAD,EAAe,CAAC,UAAD,CAAf,CADN;;IAEP,MAAM8B,cAAN,CAAqBC,IAArB,EAA2B;MACzB,KAAKP,OAAL,GAAe,EAAf;MACA,KAAKF,UAAL,GAAkB,KAAlB;MACA,KAAKC,OAAL,GAAe,IAAf;;MACA,IAAI;QACF,MAAMhB,IAAG,GAAI,MAAM,KAAKyB,aAAL,CAAmBD,IAAnB,CAAnB;QACA,KAAKP,OAAL,GAAejB,IAAI,CAACiB,OAApB;QACA,KAAKF,UAAL,GAAkB,IAAlB;QACA,KAAKC,OAAL,GAAe,KAAf;MACF,CALA,CAKE,OAAOU,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QAEA,KAAKT,OAAL,GAAe,mBAAf;QACA,KAAKF,UAAL,GAAkB,KAAlB;QACA,KAAKC,OAAL,GAAe,KAAf;MACF;IACD,CAlBM;;IAmBP,MAAMS,aAAN,CAAoBzB,IAApB,EAA0B;MACxB,IAAI;QACF,KAAK6B,OAAL,CAAaC,IAAb,CAAkB;UAAEC,IAAI,EAAE;QAAR,CAAlB;QACA,MAAMjC,cAAc,CAACkC,eAAf,CAA+BhC,IAA/B,CAAN;MACF,CAHA,CAGE,OAAO0B,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACF;IACD;;EA1BM;AA3CI,CAAf","names":["mapActions","useAuthStore","yup","Form","Field","ErrorMessage","AccountService","components","data","accountFormSchema","object","shape","username","string","required","min","max","phone","matches","password","isConfirmed","oneOf","ref","successful","loading","message","account","type","Object","require","methods","handleRegister","user","createAccount","error","console","log","$router","push","name","registerAccount"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"js-center\">\n      <div id=\"login\">\n        <h2 class=\"titleAccount\">Tạo tài khoản</h2>\n        <Form\n          class=\"login\"\n          :validation-schema=\"accountFormSchema\"\n          @submit=\"createAccount(account)\"\n        >\n          <ul>\n            <li>\n              <Field\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Tên tài khoản\"\n                class=\"text\"\n                v-model=\"account.username\"\n              />\n              <ErrorMessage name=\"username\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"phone\"\n                type=\"text\"\n                placeholder=\"Số điện thoại\"\n                class=\"text\"\n                v-model=\"account.phone\"\n              />\n              <ErrorMessage name=\"phone\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Mật khẩu\"\n                class=\"text\"\n                v-model=\"account.password\"\n              />\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"isConfirmed\"\n                type=\"password\"\n                placeholder=\"Nhập lại mật khẩu\"\n                v-model=\"account.isConfirmed\"\n                class=\"text\"\n              />\n              <ErrorMessage name=\"isConfirmed\" class=\"error-feedback\" />\n            </li>\n            <div class=\"form-login\">\n              <button\n                type=\"submit\"\n                class=\"login btn\"\n                @click=\"test\"\n                :disabled=\"loading\"\n              >\n                <span\n                  v-show=\"loading\"\n                  class=\"spinner-border spinner-border-sm\"\n                ></span>\n                Đăng ký\n              </button>\n            </div>\n          </ul>\n        </Form>\n        <div\n          v-if=\"message\"\n          class=\"alert\"\n          :class=\"successful ? 'alert-success' : 'alert-danger'\"\n        >\n          {{ message }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"pinia\";\nimport { useAuthStore } from \"@/stores/auth.store\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AccountService from \"@/services/account.service\";\n\nexport default {\n  // components: {\n  //   AppRegister,\n  // },\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  data() {\n    const accountFormSchema = yup.object().shape({\n      username: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(2, \"Vui lòng tối thiểu 2 kí tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      phone: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .matches(\n          /((09|03|07|08|05)+([0-9]{8})\\b)/g,\n          \"Số điện thoại không hợp lệ.\"\n        ),\n      password: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\")\n        .max(8, \"Mật khẩu dài tối đa 8 kí tự.\"),\n      isConfirmed: yup\n        .string()\n        .oneOf([yup.ref(\"password\"), null], \"Passwords must match\"),\n    });\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true,\n      },\n    };\n  },\n  methods: {\n    ...mapActions(useAuthStore, [\"register\"]),\n    async handleRegister(user) {\n      this.message = \"\";\n      this.successful = false;\n      this.loading = true;\n      try {\n        const data = await this.createAccount(user);\n        this.message = data.message;\n        this.successful = true;\n        this.loading = false;\n      } catch (error) {\n        console.log(error);\n\n        this.message = \"Đã có lỗi xảy ra.\";\n        this.successful = false;\n        this.loading = false;\n      }\n    },\n    async createAccount(data) {\n      try {\n        this.$router.push({ name: \"home\" });\n        await AccountService.registerAccount(data);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.js-center {\n  width: 380px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}