{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wapperaccount\"\n};\nconst _hoisted_2 = {\n  class: \"js-center\"\n};\nconst _hoisted_3 = {\n  id: \"login\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"titleAccount\"\n}, \"Đăng Nhập\", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  key: 0,\n  class: \"err\"\n};\nconst _hoisted_6 = {\n  class: \"form-login\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"rep_pas\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#\"\n}, \"Quên mật khẩu?\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"page-login__thirdPartLogin_line\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Hoặc\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"register\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" Bạn chưa có tài khoản? \");\n\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"Đăng ký\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Field = _resolveComponent(\"Field\");\n\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\");\n\n  const _component_Form = _resolveComponent(\"Form\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" <app-login :account=\\\"account\\\" @submit:account=\\\"LoginAccount\\\"> \"), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createVNode(_component_Form, {\n    class: \"login\",\n    \"validation-schema\": $data.accountFormSchema,\n    onSubmit: _cache[3] || (_cache[3] = $event => $options.handleLogin($data.account))\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"phone\",\n      type: \"text\",\n      placeholder: \"Số điện thoại\",\n      class: \"text\",\n      modelValue: $data.account.phone,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.account.phone = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"phone\",\n      class: \"error-feedback\"\n    })]), _createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"Mật khẩu\",\n      class: \"text\",\n      modelValue: $data.account.password,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.account.password = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"password\",\n      class: \"error-feedback\"\n    })]), $data.err ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \" Tên đăng nhập hoặc mật khẩu không khớp, vui lòng nhập lại. \")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"login btn\",\n      onClick: _cache[2] || (_cache[2] = (...args) => $options.test && $options.test(...args))\n    }, \" ĐĂNG NHẬP \")]), _hoisted_7])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"validation-schema\"]), _hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createVNode(_component_router_link, {\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => [_hoisted_11]),\n    _: 1\n    /* STABLE */\n\n  })])]), _createCommentVNode(\" </app-login> \")])]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAEJC,EAAE,EAAC;;;gCACNC,oBAAuC,IAAvC,EAAuC;EAAnCF,KAAK,EAAC;AAA6B,CAAvC,EAAyB,WAAzB,EAAkC;AAAA;AAAlC;;;;EA2BSA,KAAK,EAAC;;;EAGNA,KAAK,EAAC;;;gCAKXE,oBAEM,KAFN,EAEM;EAFDF,KAAK,EAAC;AAEL,CAFN,EAAoB,cAClBE,oBAA8B,GAA9B,EAA8B;EAA3BC,IAAI,EAAC;AAAsB,CAA9B,EAAY,gBAAZ,CADkB,CAApB;;AAAA;;gCAKJD,oBAEM,KAFN,EAEM;EAFDF,KAAK,EAAC;AAEL,CAFN,EAA4C,cAC1CE,oBAAiB,MAAjB,EAAiB,IAAjB,EAAM,MAAN,CAD0C,CAA5C;;AAAA;;;EAGKF,KAAK,EAAC;;;kDAAW;;kDAEQ;;;;;;;;;;;uBAjDpCI,oBAsDM,KAtDN,cAsDM,CArDJF,oBAoDM,KApDN,cAoDM,CAnDJG,0FAmDI,EAlDJH,oBAgDM,KAhDN,cAgDM,CA/CJI,UA+CI,EA9CJC,aAsCOC,eAtCP,EAsCO;IArCLR,KAAK,EAAC,OAqCD;IApCJ,qBAAmBS,uBAoCf;IAnCJC,QAAM,sCAAEC,qBAAYF,aAAZ,CAAF;EAmCF,CAtCP;sBAKE,MAgCK,CAhCLP,oBAgCK,IAhCL,EAgCK,IAhCL,EAgCK,CA/BHA,oBASK,IATL,EASK,IATL,EASK,CARHK,aAMEK,gBANF,EAME;MALAC,IAAI,EAAC,OAKL;MAJAC,IAAI,EAAC,MAIL;MAHAC,WAAW,EAAC,eAGZ;MAFAf,KAAK,EAAC,MAEN;kBADSS,cAAQO,KACjB;iEADSP,cAAQO,QAAKC;IACtB,CANF;;IAAA,iBAQG,EADHV,aAAoDW,uBAApD,EAAoD;MAAtCL,IAAI,EAAC,OAAiC;MAAzBb,KAAK,EAAC;IAAmB,CAApD,CACG,CATL,CA+BG,EArBHE,oBASK,IATL,EASK,IATL,EASK,CARHK,aAMEK,gBANF,EAME;MALAC,IAAI,EAAC,UAKL;MAJAC,IAAI,EAAC,UAIL;MAHAC,WAAW,EAAC,UAGZ;MAFAf,KAAK,EAAC,MAEN;kBADSS,cAAQU,QACjB;iEADSV,cAAQU,WAAQF;IACzB,CANF;;IAAA,iBAQG,EADHV,aAAuDW,uBAAvD,EAAuD;MAAzCL,IAAI,EAAC,UAAoC;MAAzBb,KAAK,EAAC;IAAmB,CAAvD,CACG,CATL,CAqBG,EAXoBS,2BAAvBL,oBAEM,KAFN,cAA4B,8DAA5B,sCAWG,EARHF,oBAIM,KAJN,cAIM,CAHJA,oBAES,QAFT,EAES;MAFDY,IAAI,EAAC,QAEJ;MAFad,KAAK,EAAC,WAEnB;MAFgCoB,OAAK,yCAAET,uCAAF;IAErC,CAFT,EAAsD,aAAtD,CAGI,CAJN,CAQG,EAHHU,UAGG,CAhCL,CAgCK;;;;GArCP;;EAAA,wBA8CI,EAPJC,UAOI,EAJJpB,oBAGM,KAHN,cAGM,cADJK,aAAiDgB,sBAAjD,EAAiD;IAApCC,EAAE,EAAC;EAAiC,CAAjD,EAA2B;sBAAC,MAAO,cAAR;;;;EAAA,CAA3B,CACI,CAHN,CAII,CAhDN,CAkDI,EADJnB,qCACI,CApDN,CAqDI,CAtDN","names":["class","id","_createElementVNode","href","_createElementBlock","_createCommentVNode","_hoisted_4","_createVNode","_component_Form","$data","onSubmit","$options","_component_Field","name","type","placeholder","phone","$event","_component_ErrorMessage","password","onClick","_hoisted_7","_hoisted_8","_component_router_link","to"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\n  <div class=\"wapperaccount\">\n    <div class=\"js-center\">\n      <!-- <app-login :account=\"account\" @submit:account=\"LoginAccount\"> -->\n      <div id=\"login\">\n        <h2 class=\"titleAccount\">Đăng Nhập</h2>\n        <Form\n          class=\"login\"\n          :validation-schema=\"accountFormSchema\"\n          @submit=\"handleLogin(account)\"\n        >\n          <ul>\n            <li>\n              <Field\n                name=\"phone\"\n                type=\"text\"\n                placeholder=\"Số điện thoại\"\n                class=\"text\"\n                v-model=\"account.phone\"\n              />\n              <ErrorMessage name=\"phone\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Mật khẩu\"\n                class=\"text\"\n                v-model=\"account.password\"\n              />\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\n            </li>\n            <div class=\"err\" v-if=\"err\">\n              Tên đăng nhập hoặc mật khẩu không khớp, vui lòng nhập lại.\n            </div>\n            <div class=\"form-login\">\n              <button type=\"submit\" class=\"login btn\" @click=\"test\">\n                ĐĂNG NHẬP\n              </button>\n            </div>\n            <div class=\"rep_pas\">\n              <a href=\"#\">Quên mật khẩu?</a>\n            </div>\n          </ul>\n        </Form>\n        <div class=\"page-login__thirdPartLogin_line\">\n          <span>Hoặc</span>\n        </div>\n        <div class=\"register\">\n          Bạn chưa có tài khoản?\n          <router-link to=\"/register\">Đăng ký</router-link>\n        </div>\n      </div>\n      <!-- </app-login> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"pinia\";\nimport { useAuthStore } from \"@/stores/auth.store\";\nimport { useProductData } from \"@/stores/Products\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\n// import AccountService from \"@/services/account.service\";\n\nexport default {\n  // components: {\n  //   AppLogin,\n  // },\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  setup() {\n    const login = useProductData();\n    return { login };\n  },\n  data() {\n    const accountFormSchema = yup.object().shape({\n      phone: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .matches(\n          /((09|03|07|08|05)+([0-9]{8})\\b)/g,\n          \"Số điện thoại không hợp lệ.\"\n        ),\n      password: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\")\n        .max(8, \"Mật khẩu dài tối đa 8 kí tự.\"),\n    });\n    return {\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true,\n      },\n      err: false,\n      loading: false,\n      // dataUser: useProductData(),\n    };\n  },\n  methods: {\n    ...mapActions(useAuthStore, [\"login\"]),\n\n    async handleLogin(user) {\n      this.loading = true;\n\n      try {\n        await this.login(user);\n\n        const redirectPath = this.$route.query.redirect || {\n          name: \"home\", //profile\n        };\n\n        this.$router.push(redirectPath);\n      } catch (error) {\n        console.log(error);\n\n        this.loading = false;\n        this.message = \"Đã có lỗi xảy ra.\";\n      }\n      // async LoginAccount(data) {\n      //   try {\n      //     const result = await this.loginAccount(data);\n      //     if (result) {\n      //       this.$router.push({ name: \"home\" });\n      //     } else {\n      //       this.err = true;\n      //     }\n      //   } catch (error) {\n      //     console.log(error);\n      //   }\n    },\n\n    // async LoginAccount(data) {\n    //   try {\n    //     const s = await AccountService.loginAccount(data);\n    //     if (s.message === \"Login successful\") {\n    //       console.log(s);\n    //       this.dataUser.dataUsers = s;\n    //       console.log(this.dataUser.dataUsers);\n    //       this.$router.push({ name: \"home\" });\n    //     } else {\n    //       this.err = true;\n    //     }\n    //   } catch (error) {\n    //     console.log(error);\n    //   }\n    // },\n\n    // async LoginAccount(data) {\n    //   console.log(data);\n    //   const kq = await this.login.Login(data);\n    //   // console.log(kq);\n    //   if (kq !== null) {\n    //     // console.log(kq);\n    //     this.$router.push({ name: \"home\" });\n    //   } else {\n    //     this.err = true;\n    //   }\n    // },\n    // login.Login(data),\n    test() {\n      console.log(\"00\");\n    },\n  },\n};\n</script>\n\n<style cope>\n.wapperaccount {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.js-center {\n  width: 380px;\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.err {\n  font-size: 0.9rem;\n  color: rgb(255, 0, 0);\n}\n\n.titleAccount {\n  font-size: 1.4rem;\n  font-weight: 600;\n  text-align: center;\n}\n\n.login ul {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 6px;\n}\n\n.login ul li {\n  width: 100%;\n  height: 48px;\n  margin: 12px 0;\n  border: 1px solid #999999;\n}\n\n.login ul li input {\n  background-color: transparent;\n  padding: 0 6px;\n}\n\n.text {\n  width: 100%;\n  height: 100%;\n  padding: 6px;\n  outline: none;\n  border: none;\n  font-size: 0.9rem;\n}\n\n.form-login {\n  height: 42px;\n  margin-top: 14px;\n  width: 100%;\n}\n\n.form-login .login {\n  background-color: var(--backg);\n  width: 100%;\n  height: 100%;\n  padding: 6px;\n  font-weight: 700;\n  cursor: pointer;\n  text-align: center;\n}\n\n.form-login .login:hover {\n  opacity: 0.8;\n}\n\n.rep_pas {\n  margin-top: 12px;\n}\n\n.rep_pas a {\n  font-size: 0.9rem;\n  color: #666666;\n}\n\n.rep_pas a:hover {\n  color: #000000;\n}\n\n.page-login__thirdPartLogin_line {\n  position: relative;\n  color: #b2b2b2;\n  padding: 6px 0;\n  font-size: 1rem;\n}\n\n.page-login__thirdPartLogin_line::before {\n  content: \"\";\n  width: 44%;\n  height: 1px;\n  background: #b2b2b2;\n  position: absolute;\n  top: 50%;\n  left: 0;\n}\n\n.page-login__thirdPartLogin_line::after {\n  content: \"\";\n  width: 44%;\n  height: 1px;\n  background: #b2b2b2;\n  position: absolute;\n  top: 50%;\n  right: 0;\n}\n\n.page-login__thirdPartLogin_line span {\n  padding-left: 45%;\n}\n\n.register {\n  font-size: 0.9rem;\n  color: #666666;\n  text-align: center;\n}\n\n.register a {\n  font-size: 1rem;\n  color: #0000ff;\n  font-weight: 700;\n}\n\n.register a:hover {\n  opacity: 0.8;\n  text-decoration-line: underline;\n}\n\n.error-feedback {\n  font-size: 0.8rem;\n  text-align: left;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}