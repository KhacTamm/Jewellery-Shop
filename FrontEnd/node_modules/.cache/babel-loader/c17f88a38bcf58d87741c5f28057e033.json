{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-03589122\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"js-center\"\n};\nconst _hoisted_3 = {\n  id: \"login\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"titleAccount\"\n}, \"Tạo tài khoản\", -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  class: \"form-login\"\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n  class: \"spinner-border spinner-border-sm\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" Đăng ký \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Field = _resolveComponent(\"Field\");\n\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\");\n\n  const _component_Form = _resolveComponent(\"Form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createVNode(_component_Form, {\n    class: \"login\",\n    \"validation-schema\": $data.accountFormSchema,\n    onSubmit: _cache[5] || (_cache[5] = $event => $options.createAccount($data.account))\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"username\",\n      type: \"text\",\n      placeholder: \"Tên tài khoản\",\n      class: \"text\",\n      modelValue: $data.account.username,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.account.username = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"username\",\n      class: \"error-feedback\"\n    })]), _createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"phone\",\n      type: \"text\",\n      placeholder: \"Số điện thoại\",\n      class: \"text\",\n      modelValue: $data.account.phone,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.account.phone = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"phone\",\n      class: \"error-feedback\"\n    })]), _createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"Mật khẩu\",\n      class: \"text\",\n      modelValue: $data.account.password,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.account.password = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"password\",\n      class: \"error-feedback\"\n    })]), _createElementVNode(\"li\", null, [_createVNode(_component_Field, {\n      name: \"isConfirmed\",\n      type: \"password\",\n      placeholder: \"Nhập lại mật khẩu\",\n      modelValue: $data.account.isConfirmed,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.account.isConfirmed = $event),\n      class: \"text\"\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_ErrorMessage, {\n      name: \"isConfirmed\",\n      class: \"error-feedback\"\n    })]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"login btn\",\n      onClick: _cache[4] || (_cache[4] = (...args) => _ctx.test && _ctx.test(...args)),\n      disabled: $data.loading\n    }, [_withDirectives(_createElementVNode(\"span\", _hoisted_7, null, 512\n    /* NEED_PATCH */\n    ), [[_vShow, $data.loading]]), _hoisted_8], 8\n    /* PROPS */\n    , _hoisted_6)])])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"validation-schema\"]), $data.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass([\"alert\", $data.successful ? 'alert-success' : 'alert-danger'])\n  }, _toDisplayString($data.message), 3\n  /* TEXT, CLASS */\n  )) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":"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","names":["class","id","_createElementVNode","_createElementBlock","_hoisted_4","_createVNode","_component_Form","$data","onSubmit","$options","_component_Field","name","type","placeholder","username","$event","_component_ErrorMessage","phone","password","isConfirmed","onClick","_ctx","disabled"],"sourceRoot":"","sources":["D:\\CT449\\shoponline\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"js-center\">\n      <div id=\"login\">\n        <h2 class=\"titleAccount\">Tạo tài khoản</h2>\n        <Form\n          class=\"login\"\n          :validation-schema=\"accountFormSchema\"\n          @submit=\"createAccount(account)\"\n        >\n          <ul>\n            <li>\n              <Field\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Tên tài khoản\"\n                class=\"text\"\n                v-model=\"account.username\"\n              />\n              <ErrorMessage name=\"username\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"phone\"\n                type=\"text\"\n                placeholder=\"Số điện thoại\"\n                class=\"text\"\n                v-model=\"account.phone\"\n              />\n              <ErrorMessage name=\"phone\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Mật khẩu\"\n                class=\"text\"\n                v-model=\"account.password\"\n              />\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\n            </li>\n            <li>\n              <Field\n                name=\"isConfirmed\"\n                type=\"password\"\n                placeholder=\"Nhập lại mật khẩu\"\n                v-model=\"account.isConfirmed\"\n                class=\"text\"\n              />\n              <ErrorMessage name=\"isConfirmed\" class=\"error-feedback\" />\n            </li>\n            <div class=\"form-login\">\n              <button\n                type=\"submit\"\n                class=\"login btn\"\n                @click=\"test\"\n                :disabled=\"loading\"\n              >\n                <span\n                  v-show=\"loading\"\n                  class=\"spinner-border spinner-border-sm\"\n                ></span>\n                Đăng ký\n              </button>\n            </div>\n          </ul>\n        </Form>\n        <div\n          v-if=\"message\"\n          class=\"alert\"\n          :class=\"successful ? 'alert-success' : 'alert-danger'\"\n        >\n          {{ message }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"pinia\";\nimport { useAuthStore } from \"@/stores/auth.store\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport AccountService from \"@/services/account.service\";\n\nexport default {\n  // components: {\n  //   AppRegister,\n  // },\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n  },\n  data() {\n    const accountFormSchema = yup.object().shape({\n      username: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(2, \"Vui lòng tối thiểu 2 kí tự.\")\n        .max(250, \"Tên có nhiều nhất 250 ký tự.\"),\n      phone: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .matches(\n          /((09|03|07|08|05)+([0-9]{8})\\b)/g,\n          \"Số điện thoại không hợp lệ.\"\n        ),\n      password: yup\n        .string()\n        .required(\"Vui lòng nhập trường này.\")\n        .min(4, \"Mật khẩu phải dài tối thiểu 4 kí tự.\")\n        .max(8, \"Mật khẩu dài tối đa 8 kí tự.\"),\n      isConfirmed: yup\n        .string()\n        .oneOf([yup.ref(\"password\"), null], \"Passwords must match\"),\n    });\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      accountFormSchema,\n      account: {\n        type: Object,\n        require: true,\n      },\n    };\n  },\n  methods: {\n    ...mapActions(useAuthStore, [\"register\"]),\n    async handleRegister(user) {\n      this.message = \"\";\n      this.successful = false;\n      this.loading = true;\n      try {\n        const data = await this.createAccount(user);\n        this.message = data.message;\n        this.successful = true;\n        this.loading = false;\n      } catch (error) {\n        console.log(error);\n\n        this.message = \"Đã có lỗi xảy ra.\";\n        this.successful = false;\n        this.loading = false;\n      }\n    },\n    async createAccount(data) {\n      try {\n        this.$router.push({ name: \"home\" });\n        await AccountService.registerAccount(data);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.js-center {\n  width: 380px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}